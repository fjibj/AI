用transformer-xl-chinese训练《择天记》
参考 https://github.com/GaoPeng97/transformer-xl-chinese

cd tf/scripts

cp doupo_base_gpu.sh zetianji_base_gpu.sh

zetianji_base_gpu.sh

DATA_ROOT=../data/zetianji/

mkdir data/zetianji
将《择天记》小说文本放入其中，更名为train.txt,再复制train.txt中任意一段内容生成valid.txt

cd ../  在tf目录下运行

scripts/zetianji_base_gpu.sh train_data
生成data/zetianji/下：
	cache.pkl
	corpus-info.json
	tfrecords/

修改zetianji_base_gpu.sh，设置model_dir=EXP-zetianji-mem50
scripts/zetianji_base_gpu.sh train
在2块 GTX 2070上跑了8天
INFO:tensorflow:[200] | gnorm 0.55 lr 0.000100 | loss 5.28 | pplx  195.74, bpc  7.6128
INFO:tensorflow:[400] | gnorm 0.56 lr 0.000100 | loss 4.22 | pplx   68.23, bpc  6.0922
.......
INFO:tensorflow:[999800] | gnorm 1.29 lr 0.000000 | loss 0.05 | pplx    1.05, bpc  0.0696
INFO:tensorflow:[1000000] | gnorm 1.08 lr 0.000000 | loss 0.05 | pplx    1.05, bpc  0.0685
INFO:tensorflow:Model saved in path: EXP-zetianji-mem50/model-1000000.ckpt


注意在inference的时候记得修改train_gpu.py中第504行，改成你想inference的数据集名字，这里是zetianji
即： dataset_name = "zetianji"
scripts/zetianji_base_gpu.sh inference

结果：
seed text >>> 一剑西来
100% |######################################################################################################################################|
一剑西来。

这剑是苏离教给陈长生的第二剑，现在已经声震大陆的强者无数，他什么都没有做。

但这并不意味着他就是当今大陆最强者的一个人。

这一剑很强，很巧，却很霸道。

无论是当年周独|夫在浔阳城外面对朱洛的时候，还是在浔阳城的在归属。

以朱洛在十余年前的情形，他的剑上不比王破还要强，但还要凭自己的能力战胜对方。

所以他毫不犹豫地动用了耶识步，然后用的是天道院的临光剑。

但他毫不犹豫地动用了耶识步
seed text >>> 大
100% |######################################################################################################################################|
大阵，然后用的是天道院的临光剑，单以速度论，可称无双。

无数剑招被惊呼啸而起，光明的剑光照亮了屋里。

紧接着，又有无数剑光照亮了屋里。

世间再没有哪些剑光，能够如此轻易地刺穿他的身体，将他的剑意削掉一切。

有些微寒的是，被风拂的还有些微寒，刺得陈长生左肩上的那把剑。

那把剑出自苏离，剑意自然生出一种感觉，剑招更是隐隐发生着极大的变化。

那种感觉很美，但在感觉到这种感觉里，无论是的风雪还是
seed text >>> 一招
100% |######################################################################################################################################|
一招都是那样的寒冷。

一道剑光撕破夜色，斩向陈长生。

这时候，陈长生的声音响了起来。

他的声音很平静，没有任何情绪起伏。

但这种感觉，一切都是他平静的。

他是在对商行舟说这些话。

苏离在荒野里说道：“我很欣赏你，虽然我也是在猜测你。”

陈长生说道：“我在你的面前也曾经看过一些书，但今天你很震惊。”

这是非常难以理解的事情。

以他的智慧，无法评价他的人，怎么可能就是他在京都的时候，就提
seed text >>> 不亲
100% |######################################################################################################################################|
不亲自见过他？

“我只会觉得你是在说服自己。”

徐有容看着他的眼睛说道。

因为陈长生已经猜到了这个问题，因为这个问题他很想知道。

“除了你，谁会来杀你？”

陈长生是被商行舟的真实关系所败，有一定会回答一个问题。

商行舟有些意外，说道：“你是谁？”

徐有容说道：“是的。”

陈长生说道：“我是谁。”

徐有容说道：“我是他的朋友，我很崇拜他。”

这句话里说的不是陈长生，也是唐三十六。


seed text >>> 无敌
100% |######################################################################################################################################|
无敌是基础，同时也是他的师父。

“我觉得，你应该觉得，这个世界上有谁能够暂时让你不同意。”

徐有容说道：“我也不知道。”

陈长生说道：“但我现在有一个朋友。”

商行舟隐约猜到了他想说什么。

这是他的猜测，因为这时候他听到了对方的声音。

当时在雪岭里，他看到了那位教宗陛下，看到了商行舟，看到了那个黑衣少女。

现在看来，原来你真的是那位传奇强者。

当时你师父的对话，就应该知道，他到底想做什
seed text >>> 
